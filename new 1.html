<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Long Press to Save Images</title>
<style>
    body {
        font-family: sans-serif;
        padding: 20px;
    }
    .img-box {
        margin-bottom: 20px;
        display: inline-block;
        position: relative;
    }
    img {
        width: 250px;
        height: auto;
        border-radius: 8px;
        border: 2px solid #ccc;
    }
    .save-popup {
        position: absolute;
        bottom: 10px;
        left: 10px;
        padding: 8px 12px;
        background: rgba(0,0,0,0.75);
        color: white;
        border-radius: 6px;
        display: none;
    }
</style>
</head>
<body>

<h2>Long Press to Save â€“ Demo</h2>
<p>Tekan & tahan mana-mana imej selama 600ms untuk simpan.</p>

<div class="img-box">
    <img src="https://picsum.photos/600/800?random=1" data-name="image1.jpg">
    <div class="save-popup">Saving...</div>
</div>

<div class="img-box">
    <img src="https://picsum.photos/600/800?random=2" data-name="image2.jpg">
    <div class="save-popup">Saving...</div>
</div>

<div class="img-box">
    <img src="https://picsum.photos/600/800?random=3" data-name="image3.jpg">
    <div class="save-popup">Saving...</div>
</div>

<script>
document.querySelectorAll("img").forEach(img => {
    let pressTimer;

    const parent = img.parentElement;
    const popup = parent.querySelector(".save-popup");

    function triggerSave() {
        popup.style.display = "block";
        downloadImage(img.src, img.dataset.name);
        setTimeout(() => popup.style.display = "none", 1200);
    }

    // Mobile long press
    img.addEventListener("touchstart", () => {
        pressTimer = setTimeout(triggerSave, 600);
    });

    ["touchend", "touchmove", "touchcancel"].forEach(ev =>
        img.addEventListener(ev, () => clearTimeout(pressTimer))
    );

    // Desktop (optional)
    img.addEventListener("mousedown", () => {
        pressTimer = setTimeout(triggerSave, 600);
    });
    img.addEventListener("mouseup", () => clearTimeout(pressTimer));
});

// Download helper
function downloadImage(url, filename) {
    const a = document.createElement("a");
    a.href = url;
    a.download = filename;
    document.body.appendChild(a);
    a.click();
    a.remove();
}
</script>

</body>
</html>
